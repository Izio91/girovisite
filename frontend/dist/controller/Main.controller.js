sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/core/Fragment"],(e,t,n)=>{"use strict";var o;return e.extend("frontend.controller.Main",{onInit(){o=this.getOwnerComponent().getModel("i18n").getResourceBundle();var e=this.getOwnerComponent().getRouter();e.getRoute("RouteMain").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:async function(){this.oView=this.getView();this.getBusyDialog().then(function(e){e.open()});try{Promise.all([this.readData(this,"/Header"),this.createData(this,"/Header",{ID:"123",Name:"New Entry",Status:"Active"}).then(function(e){console.log("Created Entry:",e)}).catch(function(e){console.error("Creation Failed:",e)}),this.updateData(this,"/Header('123')",{Status:"Completed"}).then(function(){console.log("Update Success")}).catch(function(e){console.error("Update Failed:",e)}),this.deleteData(this,"/Header('123')").then(function(){console.log("Deletion Success")}).catch(function(e){console.error("Deletion Failed:",e)}),this.executeAction(this,"/actiontest",{}).then(function(e){console.log("Action Success:",e)}).catch(function(e){console.error("Action Failed:",e)}),this.executeFunction(this,"/functiontest",{VisitID:"12345"}).then(function(e){console.log("Function result:",e)}).catch(function(e){console.error("Function failed:",e)}),this.executeFunctionList(this,"/functionlisttest",{}).then(function(e){console.log("Open visits:",e)}).catch(function(e){console.error("Function failed:",e)})]);this.getBusyDialog().then(function(e){e.close()})}catch(e){this.getBusyDialog().then(function(e){e.close()});t.error(o.getText("ErrorReadingDataFromBackend"),{title:"Error",details:e});throw new Error(e)}},readData:function(e,t,n=[],o=[]){return new Promise((r,i)=>{var c=e.getOwnerComponent().getModel();if(!c){i("Model is not available.");return}var s=c.bindList(t,undefined,o,n);s.requestContexts().then(function(e){let t=e.map(e=>e.getObject());console.log("Fetched Data:",t);r(t)}).catch(function(e){console.error("Error fetching data:",e);i(e)})})},createData:function(e,t,n){return new Promise((o,r)=>{var i=e.getOwnerComponent().getModel();if(!i){r("Model is not available.");return}i.create(t,n,{success:function(e){console.log("Created Successfully:",e);o(e)},error:function(e){console.error("Error Creating Data:",e);r(e)}})})},updateData:function(e,t,n){return new Promise((o,r)=>{var i=e.getOwnerComponent().getModel();if(!i){r("Model is not available.");return}i.update(t,n,{success:function(){console.log("Updated Successfully");o()},error:function(e){console.error("Error Updating Data:",e);r(e)}})})},deleteData:function(e,t){return new Promise((n,o)=>{var r=e.getOwnerComponent().getModel();if(!r){o("Model is not available.");return}r.remove(t,{success:function(){console.log("Deleted Successfully");n()},error:function(e){console.error("Error Deleting Data:",e);o(e)}})})},executeAction:function(e,t,n){return new Promise((o,r)=>{var i=e.getOwnerComponent().getModel();if(!i){r("Model is not available.");return}var c=i.bindContext(t+"(...)",undefined,{$$groupId:"myGroup"});c.setParameter("",n);c.execute().then(function(e){console.log("Action executed successfully:",e);o(e)}).catch(function(e){console.error("Error executing action:",e);r(e)})})},executeFunction:function(e,t,n){return new Promise((o,r)=>{var i=e.getOwnerComponent().getModel();if(!i){r("Model is not available.");return}var c=i.bindContext(t+"(...)",undefined);c.setParameter("",n);c.requestObject().then(function(e){console.log("Function executed successfully:",e);o(e)}).catch(function(e){console.error("Error executing function:",e);r(e)})})},executeFunctionList:function(e,t,n){return new Promise((o,r)=>{var i=e.getOwnerComponent().getModel();if(!i){r("Model is not available.");return}var c=i.bindList(t+"(...)",undefined);c.setParameter("",n);c.requestContexts().then(function(e){let t=e.map(e=>e.getObject());console.log("Function list executed successfully:",t);o(t)}).catch(function(e){console.error("Error executing function list:",e);r(e)})})},getBusyDialog:function(){if(!this._oBusy){this._oBusy=n.load({id:this.oView.getId(),name:"frontend.view.fragments.BusyDialog",controller:this}).then(function(e){this.oView.addDependent(e);return e}.bind(this))}return this._oBusy}})});
//# sourceMappingURL=Main.controller.js.map